#Список последних изменений#

##v0.1.0##

1) Новый модуль *discuss.php* с классом **Discuss** для создания тем обсуждения и комментирования чего-либо;

2) Новый модуль *share.php* с классом **Share** для обмена сообщениями и файлами по типу простой социальной сети. Вместе с модулем добавлены новые политики доступа:

* политика *share_viewing_access* относится к методам:
	* **getFile**, **getFileInfo**, **getMsg**, **msgFiles**, **sumUserMsgs**, **userMsgs**, **msgStripe**, **appendMsgStripe**, **updateMsgStripe**, **sumUserFiles**, **userFiles**, **fileStripe**, **appendFileStripe**, **updateFileStripe**, **getMsgComment**, **getMsgComments**, **appendMsgComments**, **updateMsgComments** и **repostMsg**.

* политика *share_modify_msgs_files* относится к методам:
	* **delFile**, **updateFile**, **delMsg** и **updateMsg**.

* политика *share_modify_comments* относится к методам:
	* **editMsgComment** и **eraseMsgComment**.

3) Изменения в модуле *unifunctions.php*:

* новая функция **pregDbName** для проверки допустимости имени, создаваемой базы данных;
* в функции **pregPref** разрешённая длина, принимаемой строки, уменьшена до 10 символов;
* символ *№* исключён из числа разрешённых в паролях (**pregPassw**);
* при генерации соли (**makeSalt**) и идентификаторов (**makeIdent**) больше не используется функция *rand*, она заменена функцией *mt_rand*;
* новая функция **genPassword** для генерации случайных паролей по заданным критериям сложности;
* новая функция **guid** для генерации глобально уникальных идентификаторов;
* новая функция **pregGuid**, проверяющая получаемую строку на соответствие формату глобально уникального идентификатора.

4) Изменения в модуле *auth.php*:

* в метод **userLogin** добавлен новый аргумент *blockBrute*, позволяющий временно блокировать аутентификацию пользователя по паролю после нескольких введённых подряд неверных паролей;
* в файл настроек *conf.php* были добавлены новые константы. **MECCANO_AUTH_LIMIT** устанавливает количество допустимых вводов неверного пароля до временной блокировки аутентификации пользователя, а **MECCANO_AUTH_BLOCK_PERIOD** устанавливает период временной блокировки аутентификации пользователя;
* удалена политика *auth_session*.

5) Изменения в модуле *langman.php*:

* новый метод **installLang** для установки системных языков;
* в установочный пакет добавлен файл *languages.xml*, в котором содержится информация о системных языках, установленных из пакета. По этой причине в файле *metainfo.xml* версия спецификации, описывающей структуру пакета изменена на *0.2*. Корректрость структуры файла *languages.xml* проверяется новой схемой проверки *langman-language-v01.rng*;
* исправлены ошибки в методе **addLang**.

6) Изменения в модуле *userman.php*:

* новый метод **createPassword** для генерации вторичных паролей пользователей.

7) Изменения в модуле *logman.php*:

* Некоторые методы были переименованы:
	* **delEvents** -> **delLogEvents**;
	* **newRecord** -> **newLogRecord**.

8) Изменения в модуле *policy.php*:

* Некоторые методы были переименованы:
	* **addGroup** -> **addPolicyToGroup**;
	* **delGroup** -> **delPolicyFromGroup**;
	* **funcAccess** -> **setFuncAccess**;
	* **checkAccess** -> **checkFuncAccess**;
	* **install** -> **installPolicy**.

9) Организация связей между классами модулей ядра фреймворка теперь осуществляется путём расширения, что значительно упрощает создание объектов;

10) Изменения в модуле *extclass.php*:

* новый метод **outputFormat**, устанавливающий способ вывода данных в виде стороки *json*, либо объекта *DOMDocument*;
* во всех методах классов всех модулей ядра, где ранее вывод данных осуществлялся в виде объекта *DOMDocument*, обеспечен вывод в виде строки *json*.
* в методе **setError** реализована возможность вывода на экран информации об ошибках. Для управления вывода информации об ошибке на экран в файл настроек *conf.php* была добавлена константа **MECCANO_SHOW_ERRORS**.

11) Изменения в модуле *files.php*:

* в методе **setError** реализована возможность вывода на экран информации об ошибке.

12) Изменения в модуле *plugins.php*:

* операции над плагинами блокируются во время выполнения методов **unpack**, **delUnpacked**, **install** и **delInstalled**.

13) Строки, сохраняемые в базе данных, больше не проходят предварительную обработку функцией **htmlspecialchars**.
