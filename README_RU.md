# Фреймворк для веб-программирования phpMeccano #

phpMeccano - модульно структурированный PHP фреймворк с открытым исходный кодом. Фреймворк phpMeccano предоставляет API для следующих возможностей:

* создание и управление группами пользователей;
* аутентификация пользователей;
* контроль доступа к функциям через групповые политики;
* создание многоязычного интерфейса;
* копирование, перемецение и удаление локальных файлов и папок;
* ведение журнала событий;
* создание и обмен сообщениями и файлами между контактами пользователя по типу простой социальной сети;
* создание тем для обсуждения и комментирования.

Система плагинов позволяет расширять функционал и добавлять новые возможности. Данная версия фреймворка является второй альфа-версией.

## Требования ##

Для работы phpMeccano требуется веб-сервер (*Apache*, *NGINX* или *lighttpd*) с установленными и сконфигурированными PHP и MySQL/MariaDB.
phpMeccano был протестирован со следующими окружениями:

* Apache 2.2.15 (Red Hat)
* PHP 5.3.3/ 5.4.40
* MySQL 5.1.73/ 5.5.50

==================================================

* Apache 2.4.7 (Ubuntu)
* PHP 5.5.9
* MariaDB 10.0.26

==================================================

* Apache 2.4.18 (Ubuntu)
* PHP 7.0.8
* MariaDB 10.0.26

==================================================

* nginx/1.10.0 (Ubuntu)
* PHP 7.0.8
* MySQL 5.7.13

==================================================

* lighttpd/1.4.35 (Ubuntu)
* PHP 7.0.8
* MySQL 5.7.13

Для запуcка установщика следует использовать последние версии Firefox, любого браузера, основанного на WebKit (Chromium, Google Chrome, Yandex Browser, Opera и т.д.), или IE10+. Веб-установщик был протестирован с десктопными, iOS и Android версиями браузеров.

## Установка ##

Убедитесь, что фреймворк размещен в директории доступной из сети. Затем отредактируйте файл *conf.php* и задайте параметры базы данных:

* **MECCANO_DBSTORAGE_ENGINE** - механизм хранения базы данных. Возможные значения: "*MyISAM*" and "*InnoDB*";
* **MECCANO_DBANAME** - имя администратора базы данных;
* **MECCANO_DBAPASS** - пароль администратора базы данных;
* **MECCANO_DBHOST** - хост базы данных;
* **MECCANO_DBPORT** - порт базы данных;
* **MECCANO_DBNAME** - имя базы данных;
* **MECCANO_TPREF** - префик таблиц базы данных.

Также, на своё усмотрение, вы можите отредактировать системные пути. Убедитесь, что веб-сервер имеет права на чтение/запись файлов и директорий.

Редактируя значение **MECCANO_DEF_LANG**, вы можете задать язык по умолчанию. Изначально возможные значения: "*en-US*" (Английский) и "*ru-RU*" (Русский).

Сохраните изменения.

Теперь откройте веб-браузер и перейдите по адресу ```http://hostname/install/```, чтобы запустить веб-установщик.


## Справочное руководство по API ##
На русском: [EPUB](https://bitbucket.org/azexmail/phpmeccano/downloads/phpmeccano_api_ref_0_1_0_rus.epub), [PDF](https://bitbucket.org/azexmail/phpmeccano/downloads/phpmeccano_api_ref_0_1_0_rus.pdf).

На английском: на подходе...

## Пример кода ##

Для того, чтобы пройти аутентификацию, напишите:


```
#!php

<?php

header('Content-Type: text/html; charset=utf-8');

require_once 'conf.php';
require_once MECCANO_CORE_DIR . '/auth.php';

$db = new mysqli(MECCANO_DBHOST, MECCANO_DBANAME, MECCANO_DBAPASS, MECCANO_DBNAME, MECCANO_DBPORT);
$auth = new core\Auth($db);

if ($auth->userLogin("your_username", "your_password")) {
    echo "Вы прошли аутентификацию";
}
else {
    echo $auth->errExp();
}
```


## Лицензия ##

GNU General Public License, версия 2, или (на ваше усмотрение) любая более поздняя версия.
